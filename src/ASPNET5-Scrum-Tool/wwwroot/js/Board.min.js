var AddColumn,AddTaskForm,BoardName,ColumnNameForm,PanelTitleClick,SubmitColumnForm,SubmitTaskForm,TaskForm;BoardName=$(".BoardNameHeading").text(),ColumnNameForm="<input class='PreviousColumnName' type='hidden'  style='display: none;' /> <input name='ColumnName' class='NewColumnName'> <input type='submit' value='Continue' class='ColumnTitleSubmit'>",TaskForm="<input name='TaskContent' class='TaskContent'> <input type='submit' value='Continue' class='TaskFormSubmit'>",PanelTitleClick=function(){return $("#MainColumn").on("click","div.panel-heading",function(){var n,t,a,e;return n=$(this).find(".NewColumnName"),0===n.length?(a=$(this).parent(),e=$(a).attr("id"),t=$(this).find(".panel-title").text(),$.ajax({url:"/Board/Show/"+BoardName,type:"GET",success:function(){var n,e,r;return n=$("#MainColumn").find(".NewColumnName"),0!==n.length&&(r=n.parent(),e=$(".PreviousColumnName").val(),r.html("<h3 class='panel-title'></h3>").text(e)),a.find(".panel-title").html(ColumnNameForm),$(".PreviousColumnName").val(t),$(".NewColumnName").val(t)}})):void 0})},SubmitColumnForm=function(){return $(".panel-heading").on("click","input.ColumnTitleSubmit",function(n){var t,a;return n.preventDefault(),t=$(".NewColumnName").val().trim(),a=$(this).parent().parent().attr("id"),$.ajax({url:"/Board/ChangeColumnName",type:"POST",data:{ColumnName:t,ColumnNumber:a},dataType:"json",success:function(n){var a;return a=$(".panel-heading").find(".NewColumnName").parent(),$(a).html("<h3 class='panel-title'> <h3>").text(t)},error:function(n){return alert("no good "+JSON.stringify(n))}})})},AddColumn=function(){return $("#AddColumnButton").on("click",function(n){var t,a;return n.preventDefault(),t=$("#MainColumn").children().last().prev().attr("id"),a="Something",$.ajax({url:"/Board/AddColumn",type:"POST",data:{ColumnName:a,ColumnID:t},success:function(n){return $("#AddColumnButton").before(n)},error:function(){return alert("Hit the error part")}})})},AddTaskForm=function(){return $("#MainColumn").on("click",".AddTask",function(n){var t,a,e,r;return n.preventDefault(),e=$(this).parent().parent(),t=$(e).find("TaskContent"),0===t.length?(r=$(e).attr("id"),a=$(this).prev(),$.ajax({url:"/Board/Show/"+BoardName,type:"GET",success:function(){var n,t;return n=$("#MainColumn").find(".TaskContent"),0!==n.length&&(t=n.parent(),t.find(".TaskContent").replaceWith("<a class='AddTask'> Add a task.... </a>"),t.find(".TaskFormSubmit").remove()),$(e).find(".AddTask").replaceWith(TaskForm)}})):void 0})},SubmitTaskForm=function(){return $("#MainColumn").on("click",".TaskFormSubmit",function(n){var t,a,e;return n.preventDefault(),t=$(".TaskContent").parent().parent().attr("id"),a=$(".TaskContent").val().trim(),e=$(".TaskContent").prev().attr("id"),"undefined"!=typeof TaskID&&null!==TaskID,$.ajax({url:"/Board/AddNewTask",type:"POST",data:{ParentColumnID:t,TaskID:e,TaskContent:a},success:function(n){return $(".TaskContent").replaceWith(n),$(".TaskFormSubmit").replaceWith('<a class="AddTask"> Add a task.... </a>')},error:function(n){return alert("no good "+JSON.stringify(n))}})})},$(document).ready(PanelTitleClick(),SubmitColumnForm(),AddTaskForm(),SubmitTaskForm(),AddColumn());